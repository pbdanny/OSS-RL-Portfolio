---
output: 
  html_document:
    keep_md: true
---

# OSS RL Aug-Sep 2017 analysis on D36

```{r adjust_directory_if_needed, include=FALSE}
# Initialise Project
# Uncomment lines below if rmd file is placed in a subdirectory
# library(knitr)
# opts_knit$set(root.dir = normalizePath('../')) 
```

```{r load_project, include=FALSE}
# 1. Set options in config/global.dcf
# 2. Load packages listed in config/global.dcf
# 3. Import functions and coe in lib directory
# 4. Load data in data directory
# 5. Run data manipulations in munge directory 

rm(list = ls()) # optionally refresh workspace
library(ProjectTemplate); load.project()
rl_os <- subset(rl_os, month %in% c('y201708', 'y201709'))
rm(thaiMaps)
```

Test of independent (difference) : result & month
```{r chiq_test_independent_result_month, echo=FALSE}
param1 <- 'result'
param2 <- 'month'
t <- table(rl_os[[param1]], rl_os[[param2]])
cat(paste0('Table of ', param1, ' vs ', param2))
print(t)
writeLines('')
cat(paste0('Percent contribution of ', param1, ' by ', param2))
prop.table(t, 2)*100
chisq.test(t)
i <- chisq.test(t)
i_p <- i$p.value
if (i_p <= 0.05) {
    cat(paste0(param1,' and ',param2, ' are dependent'))
} else {
    cat(paste0(param1,' and ',param2, ' are independent'))
}
rm(list = c('param1', 'param2', 't', 'i', 'i_p'))
```

Test of difference result proportion by month
```{r prop_test_each_result_month, echo=FALSE}
t <- table(rl_os$month, rl_os$result == "A")
prop.table(t, 1)
prop.test(t)

chisq.test(t)
i <- chisq.test(t)
i_p <- i$p.value
if (i_p <= 0.05) {
    cat(paste0(param1,' and ',param2, ' are dependent'))
} else {
    cat(paste0(param1,' and ',param2, ' are independent'))
}
```

